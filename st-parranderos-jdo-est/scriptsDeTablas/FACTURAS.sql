

  CREATE TABLE "ISIS2304C021910"."FACTURAS" 
   (	"NUM_FACTURA" NUMBER(6,0), 
	"FECHA" DATE, 
	"FUE_PAGADA" VARCHAR2(1 BYTE), 
	"PRECIO" NUMBER(6,0), 
	"ID_DOTACION" NUMBER, 
	"ID_SERVICIO" NUMBER, 
	"TIPO_DOC_EMPLEADO" VARCHAR2(2 BYTE) DEFAULT 'CC', 
	"ID_ESTADIA" NUMBER, 
	"NUM_DOC_EMPLEADO" NUMBER(11,0), 
	"ID_CONSUMO" NUMBER(3,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS NOLOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBSPROD" ;


  CREATE UNIQUE INDEX "ISIS2304C021910"."FACTURAS_PK" ON "ISIS2304C021910"."FACTURAS" ("NUM_FACTURA") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS NOLOGGING 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBSPROD" ;



  ALTER TABLE "ISIS2304C021910"."FACTURAS" MODIFY ("ID_CONSUMO" NOT NULL ENABLE);
  ALTER TABLE "ISIS2304C021910"."FACTURAS" MODIFY ("NUM_DOC_EMPLEADO" NOT NULL ENABLE);
  ALTER TABLE "ISIS2304C021910"."FACTURAS" MODIFY ("ID_ESTADIA" NOT NULL ENABLE);
  ALTER TABLE "ISIS2304C021910"."FACTURAS" MODIFY ("TIPO_DOC_EMPLEADO" NOT NULL ENABLE);
  ALTER TABLE "ISIS2304C021910"."FACTURAS" MODIFY ("PRECIO" NOT NULL ENABLE);
  ALTER TABLE "ISIS2304C021910"."FACTURAS" MODIFY ("FUE_PAGADA" NOT NULL ENABLE);
  ALTER TABLE "ISIS2304C021910"."FACTURAS" MODIFY ("FECHA" NOT NULL ENABLE);
  ALTER TABLE "ISIS2304C021910"."FACTURAS" MODIFY ("NUM_FACTURA" NOT NULL ENABLE);
  ALTER TABLE "ISIS2304C021910"."FACTURAS" ADD CONSTRAINT "PRECIO_POSITIVO_FACTURA" CHECK (PRECIO > 0) ENABLE;
  ALTER TABLE "ISIS2304C021910"."FACTURAS" ADD CONSTRAINT "NOMBRE_NO_VACIO_CONSUMO" CHECK (ID_CONSUMO >0) ENABLE;
  ALTER TABLE "ISIS2304C021910"."FACTURAS" ADD CONSTRAINT "FECHA_FACTURA_DESPUES_2019" CHECK (FECHA > to_date('2019-01-01','YYYY-MM-DD') ) ENABLE;
  ALTER TABLE "ISIS2304C021910"."FACTURAS" ADD CONSTRAINT "FACTURAS_PK" PRIMARY KEY ("NUM_FACTURA")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS NOLOGGING 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBSPROD"  ENABLE;
  ALTER TABLE "ISIS2304C021910"."FACTURAS" ADD CONSTRAINT "CK_FUE_PAGADA" CHECK (FUE_PAGADA IN (1,0)) ENABLE;


  ALTER TABLE "ISIS2304C021910"."FACTURAS" ADD CONSTRAINT "FK_ID_DOTACION" FOREIGN KEY ("ID_DOTACION")
	  REFERENCES "ISIS2304C021910"."DOTACIONES" ("ID_DOTACION") ENABLE;
  ALTER TABLE "ISIS2304C021910"."FACTURAS" ADD CONSTRAINT "FK_ID_EMPLEADO" FOREIGN KEY ("TIPO_DOC_EMPLEADO", "NUM_DOC_EMPLEADO")
	  REFERENCES "ISIS2304C021910"."USUARIOS" ("TIPO_DOCUMENTO", "NUMERO_DOCUMENTO") ENABLE;
  ALTER TABLE "ISIS2304C021910"."FACTURAS" ADD CONSTRAINT "FK_ID_ESTADIA_FACTURA" FOREIGN KEY ("ID_ESTADIA")
	  REFERENCES "ISIS2304C021910"."ESTADIAS" ("ID_ESTADIA") ENABLE;
  ALTER TABLE "ISIS2304C021910"."FACTURAS" ADD CONSTRAINT "FK_ID_SERVICIO_FACTURA" FOREIGN KEY ("ID_SERVICIO")
	  REFERENCES "ISIS2304C021910"."SERVICIOS" ("ID_SERVICIO") ENABLE;
