

  CREATE TABLE "ISIS2304C021910"."ESTADIAS" 
   (	"ID_ESTADIA" NUMBER(3,0), 
	"FECHA_LLEGADA" DATE, 
	"FECHA_SALIDA" DATE, 
	"NUM_PERSONAS" NUMBER(1,0), 
	"ID_PLAN" NUMBER(3,0), 
	"ID_HABITACION" NUMBER(3,0), 
	"CHECK_IN" NUMBER(1,0), 
	"PAGO" NUMBER(1,0), 
	"FK_USER_TIPODOC" VARCHAR2(2 BYTE), 
	"FK_USER_NUM" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS NOLOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBSPROD" ;


  CREATE UNIQUE INDEX "ISIS2304C021910"."ESTADIA_PK" ON "ISIS2304C021910"."ESTADIAS" ("ID_ESTADIA") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS NOLOGGING 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBSPROD" ;


  ALTER TABLE "ISIS2304C021910"."ESTADIAS" MODIFY ("FK_USER_NUM" NOT NULL ENABLE);
  ALTER TABLE "ISIS2304C021910"."ESTADIAS" MODIFY ("FK_USER_TIPODOC" NOT NULL ENABLE);
  ALTER TABLE "ISIS2304C021910"."ESTADIAS" MODIFY ("PAGO" NOT NULL ENABLE);
  ALTER TABLE "ISIS2304C021910"."ESTADIAS" MODIFY ("CHECK_IN" NOT NULL ENABLE);
  ALTER TABLE "ISIS2304C021910"."ESTADIAS" MODIFY ("ID_HABITACION" NOT NULL ENABLE);
  ALTER TABLE "ISIS2304C021910"."ESTADIAS" MODIFY ("NUM_PERSONAS" NOT NULL ENABLE);
  ALTER TABLE "ISIS2304C021910"."ESTADIAS" MODIFY ("FECHA_SALIDA" NOT NULL ENABLE);
  ALTER TABLE "ISIS2304C021910"."ESTADIAS" MODIFY ("FECHA_LLEGADA" NOT NULL ENABLE);
  ALTER TABLE "ISIS2304C021910"."ESTADIAS" MODIFY ("ID_ESTADIA" NOT NULL ENABLE);
  ALTER TABLE "ISIS2304C021910"."ESTADIAS" ADD CONSTRAINT "PAGO_BOOL" CHECK (PAGO IN (1, 0)) ENABLE;
  ALTER TABLE "ISIS2304C021910"."ESTADIAS" ADD CONSTRAINT "NUM_PERSONAS_POSITIVO" CHECK (NUM_PERSONAS > 0) ENABLE;
  ALTER TABLE "ISIS2304C021910"."ESTADIAS" ADD CONSTRAINT "FECHA_SALIDA_MAYOR_2019" CHECK (FECHA_SALIDA > TO_DATE('2019-01-01', 'YYYY-MM-DD')) ENABLE;
  ALTER TABLE "ISIS2304C021910"."ESTADIAS" ADD CONSTRAINT "FECHA_LLEGADA_INF" CHECK (FECHA_LLEGADA < FECHA_SALIDA) ENABLE;
  ALTER TABLE "ISIS2304C021910"."ESTADIAS" ADD CONSTRAINT "ESTADIA_PK" PRIMARY KEY ("ID_ESTADIA")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS NOLOGGING 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBSPROD"  ENABLE;
  ALTER TABLE "ISIS2304C021910"."ESTADIAS" ADD CONSTRAINT "CHECK_IN_BOOL" CHECK (CHECK_IN IN (1,0)) ENABLE;


  ALTER TABLE "ISIS2304C021910"."ESTADIAS" ADD CONSTRAINT "ESTADIAS_FK1" FOREIGN KEY ("FK_USER_TIPODOC", "FK_USER_NUM")
	  REFERENCES "ISIS2304C021910"."USUARIOS" ("TIPO_DOCUMENTO", "NUMERO_DOCUMENTO") ENABLE;
  ALTER TABLE "ISIS2304C021910"."ESTADIAS" ADD CONSTRAINT "FK_ID_HABITACION" FOREIGN KEY ("ID_HABITACION")
	  REFERENCES "ISIS2304C021910"."HABITACIONES" ("NUMERO_HABITACION") ENABLE;
  ALTER TABLE "ISIS2304C021910"."ESTADIAS" ADD CONSTRAINT "FK_ID_PLAN" FOREIGN KEY ("ID_PLAN")
	  REFERENCES "ISIS2304C021910"."PLANES" ("ID_PLAN") ENABLE;
